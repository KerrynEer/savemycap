<template name ="myModules">
    {{#if currentUser}}

    <h1>My Modules</h1>
    
    {{#each module}}
    <!--start of mod-->
    <div class = "module-wrap">
        <div class ="row">
            <div class ="module-added" id ={{moduleCode}}>
                <h2 class="module-title">{{moduleCode}}</h2>
                <h4 class="regular target-grade">Target: {{targetGrade}}</h4>
                
                <h4> Current score accumulated: {{accumulatedScore}} / 100 </h4>
              
                <p class="date">Added on: {{date}}</p>

                <br>

                <div class="container">
                    <p class="regular scores">
                        <form class="update-form">
                    <table class = "table table-bordered">

                        <thead>
                            <tr>
                            <th>CA Component</th>
                            <th>Weightage (%)</th>
                            <th>Marks Obtained</th>
                            <th>Total Marks</th>
                            <th>Actions </th>
                            </tr>
                        </thead>
                        
                        
                        <tbody>       
                            {{#each score}}
                            <tr>
                                <td>{{ca}}</td>
                                <td>{{weightage}} <br></td>
                                <td>{{mark}} <br></td>
                                <td>{{totalMark}}<br></td>
                                <td> <button class="btn btn-sml btn-danger" id="delete-ca">Delete</button> </td>
                            </tr>
                            {{/each}}
                                         
                            <tr>
                                
                            <td><input type="text" name="ca" id="ca" placeholder="e.g. Attendance"></td> 
                            <td><input type="number" name="weightage" min="0" max="100" step="1" id="weightage" placeholder="e.g. 15"></td>
                            <td><input type="number" name="mark" min="0" id="mark"></td>
                            <td><input type="number" name="totalMark" min="0" id="totalMark"></td>
                            <td> <button class="btn btn-sml btn-success" type = "submit">Update Score</button></td>
                            </tr>
                            
                            
                        </tbody>
                    </table>
                     </form>
                    <br>

            <!-- ANOTHER METHOD 1- A BUTTON TO BRING YOU TO ANOTHER PAGE AND SUBMIT THE FORM But this got further problems because for each different modules, they will calling this same form and then I cannot get that specific current moduleId and add the scores for that module in the Module Collection
                <p align="right">
                <button class="btn btn-success" href="/update" id= "update-link">Add CA score for {{moduleCode}}</button>
                </p>
            --> 

            <!-- ANOTHER METHOD 2- A BUTTON TO SHOW A MODAL AND SUBMIT THE FORM But this got further problems same as another method 1-->

                <!--
                <p align="right">
                <button class="btn btn-success" data-toggle="modal" data-target="#addModal" id= "addCA">Add CA score for {{moduleCode}}</button>
                </p>
            -->
                <!--
                <div id="addModal" class="modal fade">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" >&times;</button>
                            <h3 class="modal-title">Add CA score</h3>
                        </div>
                            <div class="modal-body">
                                <form class="update-form">
                                <p>Module Code: <input type="text" name="mod" id="mod" placeholder="e.g. CS2030"></p>
                                    <table class = "table table-bordered">
                                        <thead>
                                          <tr>
                                            <th>CA Component</th>
                                            <th>Weightage</th>
                                            <th>Marks Obtained</th>
                                            <th>Total Marks</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr>
                                            <td><input type="text" name="ca" id="ca" placeholder="e.g. Attendance"></td>
                                            <td><input type="number" name="weightage" min="0" max="1" step="0.01" id="weightage" placeholder="e.g. 0.5"></td>
                                            <td><input type="number" name="mark" min="0" id="mark"></td>
                                            <td><input type="number" name="totalMark" min="0" id="totalMark"></td>
                                          </tr>
                                      </tbody>
                                        </table> <br>-->

                                    <!--<input type="text" name="score" id="score" class="form-control" placeholder="Add CA score...">-->
                                    <!--
                                    <p align="right">
                                    <button class="btn btn-lg btn-success" type = "submit">Update Score</button>

                                    </p>

                                </form>
                            </div>   
                    </div>
                  </div>-->
                    </p>  
                </div>
            </div>
        </div>
    </div>
    <!--end of one mod-->

    {{else}}
    <h3>No modules to display</h3>

    {{/each}}

    {{else}}
    <h3>Please log in to view your modules</h3>
    {{/if}}

</template>
