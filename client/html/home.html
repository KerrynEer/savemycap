<template name ="myModules">

    {{#if currentUser}}
    <div id="addModule-wrap">
        <h1>Add Modules</h1>
        <center>
            <form class="add-module">
                <br>
                <div>
                    <h4>Enter module code: </h4>
                    <label for="moduleCode" class="sr-only">Module Code</label>
                    <input type="text" name="moduleCode" id="moduleCode" class="form-control" placeholder="e.g.CS2030">
                </div>
                <div>
                    <h4>Enter modular credits (MCs) for this module: </h4>
                    <label for="mc" class="sr-only">mc</label>
                    <input type="number" name="mc" id="mc" class="form-control" placeholder="e.g.4">
                </div>
                <div>
                    <h4>Enter your target grade for this module:</h4>
                    <label for="targetGrade" class="sr-only">Target Grade</label>
                    <select name="targetGrade" id="targetGrade" class="form-control">
                        <option value="A+">A+</option>
                        <option value="A">A</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B">B</option>
                        <option value="B-">B-</option>
                        <option value="C+">C+</option>
                        <option value="C">C</option>
                        <option value="D+">D+</option>
                        <option value="D">D</option>
                        <option value="F">F</option>
                        <option value="CS">CS</option>
                        <option value="CU">CU</option>
                    </select>
                </div>
                <div>
                    <h4>Enter academic year and semester:</h4>
                    <label for="acadYear" class="sr-only">Target Grade</label>
                    <select name="acadYear" id="acadYear" class="form-control">
                        <option value="AY2018-19 Sem 1">AY2018-19 Sem 1</option>
                        <option value="AY2017-18 Sem 2">AY2017-18 Sem 2</option>
                        <option value="AY2017-18 Sem 1">AY2017-18 Sem 1</option>
                        <option value="AY2016-17 Sem 2">AY2016-17 Sem 2</option>
                        <option value="AY2016-17 Sem 1">AY2016-17 Sem 1</option>
                        <option value="AY2015-16 Sem 2">AY2015-16 Sem 2</option>
                        <option value="AY2015-16 Sem 1">AY2015-16 Sem 1</option>
                        <option value="AY2014-15 Sem 2">AY2014-15 Sem 2</option>
                        <option value="AY2014-15 Sem 1">AY2014-15 Sem 1</option>
                        <option value="AY2013-14 Sem 2">AY2013-14 Sem 2</option>
                        <option value="AY2013-14 Sem 1">AY2013-14 Sem 1</option>
                    </select>
                </div>
                
                <button class="btn btn-lg btn-success btn-block" type = "submit">add</button>
            </form>
        </center>
    </div>
    <br>

    <div>   
    <h1>My Modules</h1> 
    
    <p>
    {{#each module}}
    <a  class="btn btn-info btn-lg"  role="button" href="#{{moduleCode}} ">{{moduleCode}}</a>
    {{/each}}
    </p>

    {{#each academicYear}}
    
    <h2> {{acadYear}} </h2>

    <br>
    {{#each module}}
    <!--start of mod-->
    <div class = "module-wrap">
        <div class ="row">
            <div class ="module-added" id ={{moduleCode}}>
                <h2 id = {{moduleCode}} class="module-title">{{moduleCode}}</h2>
                <h4 class="regular target-grade">Target: {{targetGrade}}</h4>
                
                <h4> Current score accumulated: {{accumulatedScore}} / 100 </h4>
              
                <p class="date">Added on: {{date}}</p>

                <br>

                <div class="container">
                    <p class="regular scores">
                        <form class="update-form">
                    <table width="90%">

                        <thead>
                            <tr>
                            <th>CA Component</th>
                            <th>Weightage (%)</th>
                            <th>Marks Obtained</th>
                            <th>Total Marks</th>
                            <th>Actions </th>
                            </tr>
                        </thead>
                                 
                        <tbody>       
                            {{#each score}}
                            <tr>
                                <td>{{ca}}</td>
                                <td>{{weightage}} <br></td>
                                <td>{{mark}} <br></td>
                                <td>{{totalMark}}<br></td>
                                <td> <button class="btn btn-sml btn-danger" id="delete-ca">Delete</button> </td>
                            </tr>
                            {{/each}}
                                         
                            <tr>
                                
                            <td><input type="text" name="ca" id="ca" placeholder="e.g. Attendance"></td> 
                            <td><input type="number" name="weightage" min="0" max="100" step="1" id="weightage" placeholder="e.g. 15"></td>
                            <td><input type="number" name="mark" min="0" id="mark"></td>
                            <td><input type="number" name="totalMark" min="0" id="totalMark"></td>
                            <td> <button class="btn btn-sml btn-success" type = "submit">Update Score</button></td>
                            </tr>          
                            
                        </tbody>
                    </table>
                     </form>
                    </p>  
                </div>
            </div>
        </div>
    </div>
    <!--end of one mod-->
    {{/each}}

    {{else}}
    <h3>No modules to display</h3>
    {{/each}}

    </div>
    {{/if}}
    
    <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
    <script>
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("myBtn").style.display = "block";
        } else {
        document.getElementById("myBtn").style.display = "none";
        }
    }

    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
    </script>

    

</template>
